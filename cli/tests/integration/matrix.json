{
  "defaults": {
    "samplePlaylist": "cli/tests/integration/data/sample.m3u",
    "sampleEpg": "cli/tests/integration/data/sample.epg.xml",
    "dropFile": "cli/tests/integration/legacy/sample_drop_list.txt",
    "legacyFilterArgs": ["--ignore-case"]
  },
  "baseline": {
    "output": "legacy-filtered.m3u",
    "typeFilterEnv": "TYPE_FILTER"
  },
  "scenarios": [
    {
      "name": "run-direct",
      "command": "run",
      "args": [
        "--playlist-url",
        "{playlist_url}",
        "--groups-file",
        "{drop_file}",
        "--out-playlist",
        "{scenario_dir}/filtered.m3u",
        "--live",
        "--verbose"
      ],
      "artifacts": {
        "playlist": "filtered.m3u"
      },
      "compareToBaseline": "filtered.m3u"
    },
    {
      "name": "run-epg",
      "command": "run",
      "args": [
        "--playlist-url",
        "{playlist_url}",
        "--epg-url",
        "{epg_url}",
        "--groups-file",
        "{drop_file}",
        "--out-playlist",
        "{scenario_dir}/filtered.m3u",
        "--out-epg",
        "{scenario_dir}/epg.xml",
        "--verbose"
      ],
      "artifacts": {
        "playlist": "filtered.m3u",
        "epg": "epg.xml"
      }
    },
    {
      "name": "run-config-default",
      "command": "run",
      "args": [
        "--config",
        "{workspace}/cli/tests/integration/runtime/test-config.yaml",
        "--profile",
        "default",
        "--verbose"
      ],
      "artifacts": {
        "playlist": "{output_root}/config/default-playlist.m3u",
        "epg": "{output_root}/config/default-epg.xml"
      }
    },
    {
      "name": "run-config-override",
      "command": "run",
      "args": [
        "--config",
        "{workspace}/cli/tests/integration/runtime/test-config.yaml",
        "--profile",
        "override",
        "--playlist-url",
        "{playlist_url}",
        "--epg-url",
        "{epg_url}",
        "--out-playlist",
        "{scenario_dir}/override-playlist.m3u",
        "--out-epg",
        "{scenario_dir}/override-epg.xml",
        "--verbose",
        "--live"
      ],
      "artifacts": {
        "playlist": "override-playlist.m3u",
        "epg": "override-epg.xml"
      },
      "compareToBaseline": "override-playlist.m3u"
    },
    {
      "name": "run-config-epg-override",
      "command": "run",
      "args": [
        "--config",
        "{workspace}/cli/tests/integration/runtime/test-config.yaml",
        "--profile",
        "default",
        "--epg-url",
        "{epg_url}",
        "--out-epg",
        "{scenario_dir}/epg-override.xml",
        "--verbose"
      ],
      "artifacts": {
        "epg": "epg-override.xml",
        "playlist": "{output_root}/config/default-playlist.m3u"
      }
    },
    {
      "name": "groups-direct",
      "command": "groups",
      "args": [
        "--playlist-url",
        "{playlist_url}",
        "--out-groups",
        "{scenario_dir}/groups.txt",
        "--verbose",
        "--live",
        "--force"
      ],
      "artifacts": {
        "groups": "groups.txt"
      }
    },
    {
      "name": "groups-config",
      "command": "groups",
      "args": [
        "--config",
        "{workspace}/cli/tests/integration/runtime/test-config.yaml",
        "--profile",
        "groups",
        "--out-groups",
        "{scenario_dir}/groups-config.txt",
        "--verbose",
        "--force"
      ],
      "artifacts": {
        "groups": "groups-config.txt"
      }
    }
  ]
}
